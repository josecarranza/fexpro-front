!function(e){var o={};function a(i){if(o[i])return o[i].exports;var t=o[i]={i:i,l:!1,exports:{}};return e[i].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=o,a.d=function(e,o,i){a.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:i})},a.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(o,"a",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p="",a(a.s=0)}([function(e,o,a){a(1),e.exports=a(3)},function(e,o,a){jQuery(function(e){Promise.resolve().then(function(){return a(2)}).then(function(o){var a=o.WooVariationGalleryAdminPro;a.GWPAdmin(),e("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){a.ImageUploader(),a.Sortable()}),e("#variable_product_options").on("woocommerce_variations_added",function(){a.ImageUploader(),a.Sortable()}),e(".dokan-product-variation-wrapper").on("dokan_variations_loaded dokan_variations_added",function(){a.ImageUploader(),a.Sortable()}),e(document).trigger("woo_variation_gallery_pro_admin_loaded")})})},function(e,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),a.d(o,"WooVariationGalleryAdminPro",function(){return n});var i=function(){function e(e,o){for(var a=0;a<o.length;a++){var i=o[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(o,a,i){return a&&e(o.prototype,a),i&&e(o,i),o}}();var t,n=(t=jQuery,function(){function e(){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"GWPAdmin",value:function(){t().gwp_deactivate_popup&&t().gwp_deactivate_popup("woo-variation-gallery")}},{key:"ImageUploader",value:function(){t(document).off("click",".add-woo-variation-gallery-image"),t(document).off("click",".woo-variation-gallery-images > li.image"),t(document).off("click",".woo_variation_gallery_media_video_popup_link"),t(document).off("click",".remove-woo-variation-gallery-image"),t(document).on("click",".add-woo-variation-gallery-image",this.AddImage),t(document).on("click",".woo-variation-gallery-images > li.image",this.ChangeImage),t(document).on("click",".remove-woo-variation-gallery-image",this.RemoveImage),t(document).on("click",".woo_variation_gallery_media_video_popup_link",this.AttachmentVideoPopup),t(".woocommerce_variation").each(function(){var e=t(this).find(".options:first");t(this).find(".woo-variation-gallery-wrapper").insertBefore(e)}),t(document).trigger("woo_variation_gallery_admin_pro_image_uploader_attached",this)}},{key:"ChangeImage",value:function(o){var a=this;o.preventDefault(),o.stopPropagation();var i=void 0,n=t(this).closest(".woo-variation-gallery-wrapper").data("product_variation_id"),r=t(this).find("input.wvg_variation_id_input").val();if(t(this).index(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(i)return void i.open();(i=wp.media({title:woo_variation_gallery_admin.choose_image,button:{text:woo_variation_gallery_admin.update_image},library:{type:["image"]}})).on("select",function(){var o=i.state().get("selection").toJSON().map(function(e){if("image"===e.type){var o=e.id,a=e.woo_variation_gallery_video,i=e.sizes,t=(i=void 0===i?{}:i).thumbnail,r=i.full,l=t?t.url:r.url;return wp.template("woo-variation-gallery-image")({id:o,url:l,product_variation_id:n,woo_variation_gallery_video:a})}}).join("");t(a).after(o),_.delay(function(){t(a).remove()},1),e.Sortable(),e.VariationChanged(a)}),i.on("open",function(){var e=i.state().get("selection");if(r>0){var o=wp.media.attachment(r);o.fetch(),e.add(o?[o]:[])}}),i.open()}}},{key:"AddImage",value:function(o){var a=this;o.preventDefault(),o.stopPropagation();var i=void 0,n=t(this).closest(".woo-variation-gallery-wrapper").data("product_variation_id");if(t(this).find("input.wvg_variation_id_input").val(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(i)return void i.open();(i=wp.media({title:woo_variation_gallery_admin.choose_image,button:{text:woo_variation_gallery_admin.add_image},library:{type:["image"]},multiple:"add"})).on("select",function(){var o=i.state().get("selection").toJSON().map(function(e){if("image"===e.type){var o=e.id,a=e.woo_variation_gallery_video,i=e.sizes,t=(i=void 0===i?{}:i).thumbnail,r=i.full,l=t?t.url:r.url;return wp.template("woo-variation-gallery-image")({id:o,url:l,product_variation_id:n,woo_variation_gallery_video:a})}}).join("");t(a).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-images").append(o),_.delay(function(){t(a).is("li.image")&&t(a).remove()},1),e.Sortable(),e.VariationChanged(a)}),i.open()}}},{key:"VariationChanged",value:function(e){t(e).closest(".woocommerce_variation").addClass("variation-needs-update"),t("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),t("#variable_product_options").trigger("woocommerce_variations_input_changed"),t(e).closest(".dokan-product-variation-itmes").addClass("variation-needs-update"),t(".dokan-product-variation-wrapper").trigger("dokan_variations_input_changed"),t(document).trigger("woo_variation_gallery_admin_variation_changed",this)}},{key:"RemoveImage",value:function(o){var a=this;o.preventDefault(),o.stopPropagation(),e.VariationChanged(this),_.delay(function(){t(a).parent().remove()},1)}},{key:"Sortable",value:function(){t(".woo-variation-gallery-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"woo-variation-gallery-sortable-placeholder",start:function(e,o){o.item.css("background-color","#F6F6F6")},stop:function(e,o){o.item.removeAttr("style")},update:function(){e.VariationChanged(this)}})}},{key:"AttachmentVideoPopup",value:function(e){var o=this;e.preventDefault(),e.stopPropagation();var a=void 0;if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(a)return void a.open();(a=wp.media({title:woo_variation_gallery_admin.choose_video,button:{text:woo_variation_gallery_admin.add_video},library:{type:["video"]},multiple:!1})).on("select",function(){var e=a.state().get("selection").first().toJSON();"video"===e.type&&t(o).closest(".compat-attachment-fields").find(".compat-field-woo_variation_gallery_media_video input").val(e.url).change()}),a.on("open",function(){a.$el.find(".media-frame-content").addClass("wvg-media-frame-modify")}),a.open()}}}]),e}())},function(e,o){}]);