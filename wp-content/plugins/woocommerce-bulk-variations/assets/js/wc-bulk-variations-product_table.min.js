/*!
 * WooCommerce Bulk Variations 1.1.9
 * Copyright 2020 Barn2 Plugins
 */
jQuery(document).ready(function(t){function l(){var d=[],u=[],c=[];jQuery(".wcbvp_quantity").each(function(t){var a=jQuery(this).data("table_id"),e=parseInt(jQuery(this).val()),r=parseFloat(jQuery(this).data("price")),i=parseInt(jQuery(this).data("product_id"));if(0<=e){var n=e*r,o=0,l=0;for(void 0!==d[a]&&(o+=d[a]),void 0!==u[a]&&(l+=u[a]),d[a]=o+e,u[a]=l+n,t=0;t<e;t++)null==c[a]&&(c[a]=[]),c[a].push(i)}}),jQuery(".wcbvp_total_price").each(function(t){var a=b2_currency_options.decimals,e=b2_currency_options.d_separator,r=b2_currency_options.t_separator;null==a&&(a=2),null==e&&(e="."),null==r&&(r="");var i=jQuery(this).data("table_id");if(void 0!==u[i]){var n=u[i].toFixed(a);n=function(t,a,e){var r=(t+="").split("."),i=r[0],n=1<r.length?a+r[1]:"";if(3<i.length&&e)for(var o=Math.floor(i.length/3),l=0;l<o;l++){var d=i.length-l*e.length-3*(l+1);if(d<=0)break;i=[i.slice(0,d),i.slice(d)].join(e)}return i+n}(n,e,r),jQuery(this).text(n)}}),jQuery(".wcbvp_total_quantity").each(function(t){var a=jQuery(this).data("table_id");void 0!==d[a]&&(jQuery(this).text(d[a]),0<d[a]&&void 0!==c[a]?(jQuery("#wcbvp_wrapper_"+a+" .single_add_to_cart_button").removeClass("disabled"),jQuery("#wcbvp_wrapper_"+a+" .single_add_to_cart_button").removeClass("wc-variation-selection-needed"),jQuery("#wcbvp_wrapper_"+a+" .single_add_to_cart_button").prop("disabled",!1),jQuery("#wcbvp_wrapper_"+a+' [name="multiple-add-to-cart"]').val(c[a].toString())):(jQuery("#wcbvp_wrapper_"+a+".single_add_to_cart_button").addClass("disabled"),jQuery("#wcbvp_wrapper_"+a+".single_add_to_cart_button").addClass("wc-variation-selection-needed"),jQuery("#wcbvp_wrapper_"+a+".single_add_to_cart_button").prop("disabled",!0)))})}jQuery(document.body).on("input",".wcbvp_quantity",function(t){var a=t.currentTarget,e=jQuery(a),r=e.attr("max");r=r&&r.toString();r&&!isNaN(parseFloat(r))&&isFinite(r)&&(r=parseInt(r),e.val()>r&&(t.preventDefault(),e.val(r)));var i=e.data("individual"),n=e.data("table_id"),o=e.val();i&&0<o&&(jQuery('.wcbvp_quantity[data-table_id="'+n+'"]').not(a).val(0),1<o&&e.val(1));l()}),l(),jQuery(document.body).on("click",".wc-bulk-variations-table .woocommerce-product-gallery__image a",function(t){if("undefined"==typeof PhotoSwipe||"undefined"==typeof PhotoSwipeUI_Default)return!0;t.preventDefault();var a=jQuery(".pswp")[0],e=jQuery(t.target).closest(".woocommerce-product-gallery__image"),i=[];a.classList.add("wbv-gallery"),0<e.length&&e.each(function(t,a){var e=jQuery(a).find("img"),r={src:e.attr("data-large_image"),w:e.attr("data-large_image_width"),h:e.attr("data-large_image_height"),title:e.attr("data-caption")&&e.attr("data-caption").length?e.attr("data-caption"):e.attr("title")};i.push(r)});var r=new PhotoSwipe(a,PhotoSwipeUI_Default,i,{index:0,shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0});r.init(),r.listen("close",function(){window.dontCloseQVP=!0})})});